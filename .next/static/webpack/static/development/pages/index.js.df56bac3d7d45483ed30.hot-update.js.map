{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.df56bac3d7d45483ed30.hot-update.js","sources":["webpack:///./components/Chat.js"],"sourcesContent":["/* components/Chat.js */\r\n\r\n    import React, { Component, Fragment } from 'react';\r\n    import axios from 'axios';\r\n    import Pusher from 'pusher-js';\r\n\r\n    class Chat extends Component {\r\n\r\n      state = { chats: [] }\r\n\r\n      componentDidMount() {\r\n\r\n        this.pusher = new Pusher(process.env.PUSHER_APP_KEY, {\r\n          cluster: process.env.PUSHER_APP_CLUSTER,\r\n          encrypted: true\r\n        });\r\n\r\n        this.channel = this.pusher.subscribe('chat-room');\r\n\r\n        this.channel.bind('new-message', ({ chat = null }) => {\r\n          const { chats } = this.state;\r\n          chat && chats.push(chat);\r\n          this.setState({ chats });\r\n        });\r\n\r\n        this.pusher.connection.bind('connected', () => {\r\n          axios.post('/messages')\r\n            .then(response => {\r\n              const chats = response.data.messages;\r\n              this.setState({ chats });\r\n            });\r\n        });\r\n\r\n      }\r\n\r\n      componentWillUnmount() {\r\n        this.pusher.disconnect();\r\n      }\r\n\r\n      /* components/Chat.js */\r\n\r\n      handleKeyUp = evt => {\r\n        const value = evt.target.value;\r\n\r\n        if (evt.keyCode === 13 && !evt.shiftKey) {\r\n          const { activeUser: user } = this.props;\r\n          const chat = { user, message: value, timestamp: +new Date };\r\n\r\n          evt.target.value = '';\r\n          axios.post('/message', chat);\r\n        }\r\n      }\r\n\r\n      render() {\r\n        return (this.props.activeUser && <Fragment>\r\n\r\n          <div className=\"border-bottom border-gray w-100 d-flex align-items-center bg-white\" style={{ height: 90 }}>\r\n            <h2 className=\"text-dark mb-0 mx-4 px-2\">{this.props.activeUser}</h2>\r\n          </div>\r\n\r\n          <div className=\"border-top border-gray w-100 px-4 d-flex align-items-center bg-light\" style={{ minHeight: 90 }}>\r\n            <textarea className=\"form-control px-3 py-2\" onKeyUp={this.handleKeyUp} placeholder=\"Enter a chat message\" style={{ resize: 'none' }}></textarea>\r\n          </div>\r\n\r\n        </Fragment> )\r\n      }  \r\n\r\n    }\r\n\r\n    export default Chat;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AAEA;AAAA;AAAA;AACA;AAgCA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;;;;;;AA1CA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAKA;AAEA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;;;AAEA;AACA;AACA;AAEA;AACA;;;AAaA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;AA3DA;AACA;AA8DA;;;;A","sourceRoot":""}